<div class="row"
     [class.user]="message.author === 'USER'"
     [class.assistant]="message.author === 'ASSISTANT'">

  <ng-container *ngIf="message.author === 'ASSISTANT'; else userSide">
    <app-orb-icon class="avatar" [size]="22" [animate]="true"></app-orb-icon>
  </ng-container>
  <ng-template #userSide>
    <app-user-avatar class="avatar" [size]="22" [clickable]="false"></app-user-avatar>
  </ng-template>

  <div class="message-stack">
    <div class="attachments" *ngIf="message.attachments?.length">
      <div class="attachment-card" *ngFor="let attachment of message.attachments">
        <span class="file-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="18" height="18" focusable="false" aria-hidden="true">
            <path
              fill="currentColor"
              d="M7 3h7l5 5v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm7 1.5V9h4.5L14 4.5zM9 13h6a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2zm0 4h6a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2z" />
          </svg>
        </span>
        <div class="attachment-info">
          <div class="attachment-name">{{ attachment.name }}</div>
          <div class="attachment-size">{{ formatBytes(attachment.size) }}</div>
        </div>
      </div>
    </div>
    <div class="bubble">
      <app-markdown-viewer [content]="message.content"></app-markdown-viewer>
    </div>
  </div>
</div>
